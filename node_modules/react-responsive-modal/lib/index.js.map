{"version":3,"file":"index.js","sources":["../src/close-icon.js","../node_modules/style-inject/dist/style-inject.es.js","../src/modal.js"],"sourcesContent":["import React from 'react';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\n\nconst CloseIcon = ({\n  classes,\n  classNames,\n  styles,\n  closeIconSize,\n  closeIconSvgPath,\n  onClickCloseIcon,\n}) => (\n  <button\n    className={cx(classes.closeButton, classNames.closeButton)}\n    style={styles.closeButton}\n    onClick={onClickCloseIcon}\n  >\n    <svg\n      className={cx(classes.closeIcon, classNames.closeIcon)}\n      style={styles.closeIcon}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width={closeIconSize}\n      height={closeIconSize}\n      viewBox=\"0 0 36 36\"\n    >\n      {closeIconSvgPath}\n    </svg>\n  </button>\n);\n\nCloseIcon.propTypes = {\n  classNames: PropTypes.object.isRequired,\n  styles: PropTypes.object.isRequired,\n  classes: PropTypes.object.isRequired,\n  closeIconSize: PropTypes.number.isRequired,\n  closeIconSvgPath: PropTypes.node.isRequired,\n  onClickCloseIcon: PropTypes.func.isRequired,\n};\n\nexport default CloseIcon;\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { polyfill } from 'react-lifecycles-compat';\nimport Portal from 'react-minimalist-portal';\nimport CSSTransition from 'react-transition-group/CSSTransition';\nimport cx from 'classnames';\nimport noScroll from 'no-scroll';\nimport CloseIcon from './close-icon';\nimport cssClasses from './styles.css';\n\nclass Modal extends Component {\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (!prevState.showPortal && nextProps.open) {\n      return {\n        showPortal: true,\n      };\n    }\n    return null;\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showPortal: props.open,\n    };\n    this.shouldClose = null;\n  }\n\n  componentDidMount() {\n    // Block scroll when initial prop is open\n    if (this.props.open) {\n      this.handleOpen();\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.showPortal && !this.state.showPortal) {\n      this.handleClose();\n    } else if (!prevProps.open && this.props.open) {\n      this.handleOpen();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.open) {\n      this.handleClose();\n    }\n  }\n\n  handleOpen = () => {\n    this.blockScroll();\n    document.addEventListener('keydown', this.handleKeydown);\n  };\n\n  handleClose = () => {\n    this.unblockScroll();\n    document.removeEventListener('keydown', this.handleKeydown);\n  };\n\n  handleClickOverlay = event => {\n    if (this.shouldClose === null) {\n      this.shouldClose = true;\n    }\n\n    if (!this.shouldClose) {\n      this.shouldClose = null;\n      return;\n    }\n\n    if (this.props.onOverlayClick) {\n      this.props.onOverlayClick(event);\n    }\n\n    if (this.props.closeOnOverlayClick) {\n      this.props.onClose(event);\n    }\n\n    this.shouldClose = null;\n  };\n\n  handleClickCloseIcon = event => {\n    this.props.onClose(event);\n  };\n\n  handleKeydown = event => {\n    if (event.keyCode !== 27) {\n      return;\n    }\n\n    if (this.props.onEscKeyDown) {\n      this.props.onEscKeyDown(event);\n    }\n\n    if (this.props.closeOnEsc) {\n      this.props.onClose(event);\n    }\n  };\n\n  handleModalEvent = () => {\n    this.shouldClose = false;\n  };\n\n  handleEntered = () => {\n    if (this.props.onEntered) {\n      this.props.onEntered();\n    }\n  };\n\n  handleExited = () => {\n    if (this.props.onExited) {\n      this.props.onExited();\n    }\n\n    this.setState({ showPortal: false });\n    this.unblockScroll();\n  };\n\n  // eslint-disable-next-line class-methods-use-this\n  blockScroll() {\n    noScroll.on();\n  }\n\n  unblockScroll = () => {\n    const openedModals = document.getElementsByClassName(\n      this.props.classes.modal\n    );\n    if (openedModals.length === 1) {\n      noScroll.off();\n    }\n  };\n\n  render() {\n    const {\n      open,\n      center,\n      classes,\n      classNames,\n      styles,\n      showCloseIcon,\n      closeIconSize,\n      closeIconSvgPath,\n      animationDuration,\n    } = this.props;\n    const { showPortal } = this.state;\n\n    if (!showPortal) {\n      return null;\n    }\n\n    return (\n      <Portal>\n        <CSSTransition\n          in={open}\n          appear\n          classNames={{\n            appear: classNames.transitionEnter || classes.transitionEnter,\n            appearActive:\n              classNames.transitionEnterActive || classes.transitionEnterActive,\n            enter: classNames.transitionEnter || classes.transitionEnter,\n            enterActive:\n              classNames.transitionEnterActive || classes.transitionEnterActive,\n            exit: classNames.transitionExit || classes.transitionExit,\n            exitActive:\n              classNames.transitionExitActive || classes.transitionExitActive,\n          }}\n          timeout={animationDuration}\n          onEntered={this.handleEntered}\n          onExited={this.handleExited}\n        >\n          <div\n            className={cx(\n              classes.overlay,\n              center ? classes.overlayCenter : null,\n              classNames.overlay\n            )}\n            onClick={this.handleClickOverlay}\n            style={styles.overlay}\n          >\n            <div\n              className={cx(classes.modal, classNames.modal)}\n              style={styles.modal}\n              onMouseDown={this.handleModalEvent}\n              onMouseUp={this.handleModalEvent}\n              onClick={this.handleModalEvent}\n            >\n              {this.props.children}\n              {showCloseIcon && (\n                <CloseIcon\n                  classes={classes}\n                  classNames={classNames}\n                  styles={styles}\n                  closeIconSize={closeIconSize}\n                  closeIconSvgPath={closeIconSvgPath}\n                  onClickCloseIcon={this.handleClickCloseIcon}\n                />\n              )}\n            </div>\n          </div>\n        </CSSTransition>\n      </Portal>\n    );\n  }\n}\n\nModal.propTypes = {\n  /**\n   * Is the modal closable when user press esc key.\n   */\n  closeOnEsc: PropTypes.bool,\n  /**\n   * Is the modal closable when user click on overlay.\n   */\n  closeOnOverlayClick: PropTypes.bool,\n  /**\n   * Callback fired when the Modal is open and the animation is finished.\n   */\n  onEntered: PropTypes.func,\n  /**\n   * Callback fired when the Modal has exited and the animation is finished.\n   */\n  onExited: PropTypes.func,\n  /**\n   * Callback fired when the Modal is requested to be closed by a click on the overlay or when user press esc key.\n   */\n  onClose: PropTypes.func.isRequired,\n  /**\n   * Callback fired when the escape key is pressed.\n   */\n  onEscKeyDown: PropTypes.func,\n  /**\n   * Callback fired when the overlay is clicked.\n   */\n  onOverlayClick: PropTypes.func,\n  /**\n   * Control if the modal is open or not.\n   */\n  open: PropTypes.bool.isRequired,\n  /**\n   * An object containing classNames to style the modal, can have properties 'overlay' (classname for overlay div), 'modal' (classname for modal content div), 'closeButton' (classname for the button that contain the close icon), 'closeIcon' (classname for close icon svg). You can customize the transition with 'transitionEnter', 'transitionEnterActive', 'transitionExit', 'transitionExitActive'\n   */\n  classNames: PropTypes.object,\n  /**\n   * An object containing the styles objects to style the modal, can have properties 'overlay', 'modal', 'closeButton', 'closeIcon'.\n   */\n  styles: PropTypes.object,\n  /**\n   * The content of the modal.\n   */\n  children: PropTypes.node,\n  /**\n   * @internal\n   */\n  classes: PropTypes.object,\n  /**\n   * Is the dialog centered (**when you don't have a lot of content**).\n   */\n  center: PropTypes.bool,\n  /**\n   * Show the close icon.\n   */\n  showCloseIcon: PropTypes.bool,\n  /**\n   * Close icon size.\n   */\n  closeIconSize: PropTypes.number,\n  /**\n   * A valid svg path to show as icon.\n   */\n  closeIconSvgPath: PropTypes.node,\n  /**\n   * Animation duration in milliseconds.\n   */\n  animationDuration: PropTypes.number,\n};\n\nModal.defaultProps = {\n  classes: cssClasses,\n  closeOnEsc: true,\n  closeOnOverlayClick: true,\n  onEntered: null,\n  onExited: null,\n  onEscKeyDown: null,\n  onOverlayClick: null,\n  showCloseIcon: true,\n  closeIconSize: 28,\n  closeIconSvgPath: (\n    <path d=\"M28.5 9.62L26.38 7.5 18 15.88 9.62 7.5 7.5 9.62 15.88 18 7.5 26.38l2.12 2.12L18 20.12l8.38 8.38 2.12-2.12L20.12 18z\" />\n  ),\n  classNames: {},\n  styles: {},\n  children: null,\n  center: false,\n  animationDuration: 500,\n};\n\npolyfill(Modal);\n\nexport default Modal;\n"],"names":["CloseIcon","classes","classNames","styles","closeIconSize","closeIconSvgPath","onClickCloseIcon","React","cx","closeButton","closeIcon","propTypes","PropTypes","object","isRequired","number","node","func","Modal","nextProps","prevState","showPortal","open","props","handleOpen","blockScroll","addEventListener","handleKeydown","handleClose","unblockScroll","removeEventListener","handleClickOverlay","shouldClose","onOverlayClick","event","closeOnOverlayClick","onClose","handleClickCloseIcon","keyCode","onEscKeyDown","closeOnEsc","handleModalEvent","handleEntered","onEntered","handleExited","onExited","setState","openedModals","document","getElementsByClassName","modal","length","off","state","prevProps","on","center","showCloseIcon","animationDuration","transitionEnter","transitionEnterActive","transitionExit","transitionExitActive","overlay","overlayCenter","children","Component","bool","defaultProps","cssClasses","polyfill"],"mappings":"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"}